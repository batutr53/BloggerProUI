<!-- Modern Footer -->
<footer class="modern-footer">
    <div class="modern-footer-container" id="footer-container">
        <!-- Footer sections will be loaded dynamically -->
    </div>
    
    <!-- Copyright -->
    <div class="modern-footer-copyright" id="footer-copyright">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="modern-footer-copyright-text">
                        © @DateTime.Now.Year <strong>insanlıkHallerimiz</strong>. Tüm hakları saklıdır.
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div class="modern-footer-social">
                        <a href="#" class="modern-footer-social-link" title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="modern-footer-social-link" title="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="modern-footer-social-link" title="LinkedIn">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="mailto:iletisim@insanlikhallerimiz.com" class="modern-footer-social-link" title="E-posta">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

<script>
// Load footer content dynamically
document.addEventListener('DOMContentLoaded', function() {
    loadFooterContent();
});

async function loadFooterContent() {
    try {
        // Check if dynamic footer system is enabled
        const footerSystemEnabled = localStorage.getItem('footerSystemEnabled');
        
        // If disabled, always show static footer
        if (footerSystemEnabled === 'false') {
            renderStaticFooter();
            return;
        }
        
        // Try to load dynamic footer (default behavior)
        const response = await fetch('/Footer/GetActiveFooters');
        const footers = await response.json();
        
        if (footers && footers.length > 0) {
            renderFooterSections(footers);
            renderCopyright(footers);
        } else {
            renderStaticFooter();
        }
    } catch (error) {
        console.log('Footer loading error:', error);
        renderStaticFooter();
    }
}

function renderFooterSections(footers) {
    const container = document.getElementById('footer-container');
    const sections = {};
    
    footers.forEach(footer => {
        const key = footer.parentSection || footer.sectionTitle || 'default';
        if (!sections[key]) {
            sections[key] = [];
        }
        sections[key].push(footer);
    });
    
    let html = '';
    
    Object.keys(sections).forEach(sectionKey => {
        const sectionFooters = sections[sectionKey];
        const mainFooter = sectionFooters.find(f => f.footerType === 'section') || sectionFooters[0];
        
        if (mainFooter && mainFooter.footerType !== 'copyright') {
            html += '<div class="footer-section">';
            
            if (mainFooter.iconClass) {
                html += `<h5><i class="${mainFooter.iconClass}"></i> ${mainFooter.sectionTitle}</h5>`;
            } else {
                html += `<h5>${mainFooter.sectionTitle}</h5>`;
            }
            
            if (mainFooter.content) {
                html += `<p style="color: #ccc; font-size: 14px; margin-bottom: 15px;">${mainFooter.content}</p>`;
            }
            
            const links = sectionFooters.filter(f => f.footerType === 'link');
            if (links.length > 0) {
                html += '<ul class="footer-links">';
                links.forEach(link => {
                    if (link.linkUrl && link.linkText) {
                        html += `<li><a href="${link.linkUrl}">${link.linkText}</a></li>`;
                    } else if (link.linkText) {
                        html += `<li><a href="#">${link.linkText}</a></li>`;
                    }
                });
                html += '</ul>';
            }
            
            const newsletter = sectionFooters.find(f => f.footerType === 'newsletter');
            if (newsletter) {
                html += '<div class="newsletter-input">';
                html += '<input type="email" placeholder="E-posta adresiniz">';
                html += '<button type="button">Abone Ol</button>';
                html += '</div>';
            }
            
            html += '</div>';
        }
    });
    
    container.innerHTML = html;
}

function renderCopyright(footers) {
    const copyrightFooter = footers.find(f => f.footerType === 'copyright');
    if (copyrightFooter) {
        const copyrightDiv = document.getElementById('footer-copyright');
        copyrightDiv.innerHTML = `<p style="color: #999; font-size: 13px; margin: 0;">${copyrightFooter.content}</p>`;
    }
}

function renderStaticFooter() {
    const container = document.getElementById('footer-container');
    container.innerHTML = `
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="modern-footer-section">
                        <h5 class="modern-footer-title">
                            <i class="fas fa-heart modern-footer-icon"></i>
                            insanlıkHallerimiz
                        </h5>
                        <p class="modern-footer-description">
                            İnsan deneyiminin derinliklerini keşfeden, duyguların ve düşüncelerin karmaşık dünyasını anlatan blog platformu.
                        </p>
                        <ul class="modern-footer-links">
                            <li><a href="/Home/About">Hakkımızda</a></li>
                            <li><a href="/Home/Contact">İletişim</a></li>
                            <li><a href="/Home/Privacy">Gizlilik Politikası</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="modern-footer-section">
                        <h5 class="modern-footer-title">
                            <i class="fas fa-compass modern-footer-icon"></i>
                            Keşfet
                        </h5>
                        <ul class="modern-footer-links">
                            <li><a href="/Blog">Tüm Yazılar</a></li>
                            <li><a href="/Category/duygu">Duygular</a></li>
                            <li><a href="/Category/dusunce">Düşünceler</a></li>
                            <li><a href="/Category/deneyim">Deneyimler</a></li>
                            <li><a href="/Category/sanat">Sanat & Kültür</a></li>
                            <li><a href="/Category/felsefe">Felsefe</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-12 mb-4">
                    <div class="modern-footer-section">
                        <h5 class="modern-footer-title">
                            <i class="fas fa-users modern-footer-icon"></i>
                            Topluluk
                        </h5>
                        <ul class="modern-footer-links">
                            <li><a href="/UserSearch">Yazar Keşfi</a></li>
                            <li><a href="/Chat">Sohbet</a></li>
                            <li><a href="/Notification">Bildirimler</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    `;
}

</script>
