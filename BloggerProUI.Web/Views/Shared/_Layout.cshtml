<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] - insanlikHallerimiz</title>
    
    <!-- CACHE DEVRE DIŞI META TAGS -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Last-Modified" content="@DateTime.UtcNow.ToString("R")">
    <meta http-equiv="ETag" content="@Guid.NewGuid()">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="@(ViewData["Description"] ?? "insanlikHallerimiz - Sanat, tasarım ve fotoğrafçılık dünyasından güncel içerikler, ilham verici yazılar ve yaratıcı fikirler.")">
    <meta name="keywords" content="@(ViewData["Keywords"] ?? "blog, sanat, tasarım, fotoğrafçılık, yaratıcılık, insanlik hallerimiz")">
    <meta name="author" content="@(ViewData["Author"] ?? "insanlikHallerimiz")">
    <meta name="robots" content="@(ViewData["Robots"] ?? "index, follow")">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="@(ViewData["CanonicalUrl"] ?? $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}")">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="@(ViewData["OgTitle"] ?? ViewData["Title"] + " - insanlikHallerimiz")">
    <meta property="og:description" content="@(ViewData["OgDescription"] ?? ViewData["Description"] ?? "insanlikHallerimiz - Sanat, tasarım ve fotoğrafçılık dünyasından güncel içerikler.")">
    <meta property="og:image" content="@(ViewData["OgImage"] ?? $"{Context.Request.Scheme}://{Context.Request.Host}/images/og-default.jpg")">
    <meta property="og:url" content="@(ViewData["OgUrl"] ?? $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}")">
    <meta property="og:type" content="@(ViewData["OgType"] ?? "website")">
    <meta property="og:site_name" content="insanlikHallerimiz">
    <meta property="og:locale" content="tr_TR">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="@(ViewData["TwitterTitle"] ?? ViewData["OgTitle"] ?? ViewData["Title"] + " - insanlikHallerimiz")">
    <meta name="twitter:description" content="@(ViewData["TwitterDescription"] ?? ViewData["OgDescription"] ?? ViewData["Description"] ?? "insanlikHallerimiz - Sanat, tasarım ve fotoğrafçılık dünyasından güncel içerikler.")">
    <meta name="twitter:image" content="@(ViewData["TwitterImage"] ?? ViewData["OgImage"] ?? $"{Context.Request.Scheme}://{Context.Request.Host}/images/og-default.jpg")">
    <meta name="twitter:site" content="@@insanlikhallerimiz">
    <meta name="twitter:creator" content="@@insanlikhallerimiz">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#333333">
    <meta name="msapplication-TileColor" content="#333333">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    @if(ViewData["ArticlePublishedTime"] != null)
    {
        <meta property="article:published_time" content="@ViewData["ArticlePublishedTime"]">
    }
    @if(ViewData["ArticleModifiedTime"] != null)
    {
        <meta property="article:modified_time" content="@ViewData["ArticleModifiedTime"]">
    }
    @if(ViewData["ArticleAuthor"] != null)
    {
        <meta property="article:author" content="@ViewData["ArticleAuthor"]">
    }
    @if(ViewData["ArticleSection"] != null)
    {
        <meta property="article:section" content="@ViewData["ArticleSection"]">
    }
    @if(ViewData["ArticleTags"] != null)
    {
        @foreach(var tag in ViewData["ArticleTags"] as List<string> ?? new List<string>())
        {
            <meta property="article:tag" content="@tag">
        }
    }
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet" media="swap">
    <link rel="stylesheet" href="~/css/style.css?v=@DateTime.Now.Ticks" />
    <link rel="stylesheet" href="~/css/post-content.css?v=@DateTime.Now.Ticks" />
    <link rel="stylesheet" href="~/css/header-search.css?v=@DateTime.Now.Ticks" />
    
    <!-- Structured Data -->
    @if(ViewData["StructuredData"] != null)
    {
        @Html.Raw(ViewData["StructuredData"])
    }
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="sr-only sr-only-focusable">Ana içeriğe geç</a>
    
    <div id="header-container">
        @await Html.PartialAsync("_Header")
    </div>

    <main id="main-content">
        @RenderBody()
    </main>

    @await Html.PartialAsync("_Footer")

    <script>
        // ULTRA CACHE KILLER - Browser cache'i tamamen öldür
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    registration.unregister();
                }
            });
        }
        
        // Browser cache'i temizle
        if ('caches' in window) {
            caches.keys().then(function(names) {
                for (let name of names) caches.delete(name);
            });
        }
        
        // Page cache'i engelle
        window.addEventListener('beforeunload', function() {
            if (window.performance && window.performance.navigation.type === 2) {
                location.reload(true);
            }
        });
        
        // Back button cache'i engelle
        window.addEventListener('pageshow', function(event) {
            if (event.persisted) {
                location.reload(true);
            }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js?v=@DateTime.Now.Ticks&nocache=@Guid.NewGuid()"></script>
    <script src="~/js/seo-enhancements.js?v=@DateTime.Now.Ticks&nocache=@Guid.NewGuid()"></script>
    <script src="~/js/cache-busting.js?v=@DateTime.Now.Ticks&nocache=@Guid.NewGuid()"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
