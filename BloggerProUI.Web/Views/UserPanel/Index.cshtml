@model BloggerProUI.Web.Models.UserDashboardViewModel

@{
    ViewData["Title"] = "Dashboard";
    Layout = "_DashboardLayout";
}

<!-- Dashboard Container -->
<div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
        <h2 class="sidebar-title">MenÃ¼</h2>
        <ul class="sidebar-menu">
            <li><a href="#" class="active" data-tab="dashboard"><i class="fas fa-chart-line"></i> Dashboard</a></li>
            <li><a href="#" data-tab="reading"><i class="fas fa-book"></i> Okuma Listesi</a></li>
            <li><a href="#" data-tab="bookmarks"><i class="fas fa-bookmark"></i> Yer Ä°mleri</a></li>
            <li><a href="#" data-tab="profile"><i class="fas fa-user"></i> Profil AyarlarÄ±</a></li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="page-header">
                <h1 class="page-title">Dashboard</h1>
                <p class="page-subtitle">HoÅŸ geldin! Ä°ÅŸte aktivitelerinin Ã¶zeti.</p>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" data-target="@Model.Stats.TotalReadPosts">0</div>
                    <div class="stat-label">Okunan Makale</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-target="@Model.Stats.TotalBookmarks">0</div>
                    <div class="stat-label">Yer Ä°mi</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-target="@Model.Stats.ConsecutiveActiveDays">0</div>
                    <div class="stat-label">Aktif GÃ¼n Serisi</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-target="@Model.Stats.TotalReadingTime">0</div>
                    <div class="stat-label">Okuma SÃ¼resi (dk)</div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="activity-section">
                <h2 class="section-title">Son Aktiviteler</h2>
                <div class="activity-list">
                    @if (Model.Activities.Any())
                    {
                        @foreach (var activity in Model.Activities)
                        {
                            <div class="activity-item">
                                <div class="activity-icon" style="background-color: @activity.Color">
                                    <i class="@activity.Icon"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        @activity.Title: @activity.Description
                                        @if (!string.IsNullOrEmpty(activity.PostSlug))
                                        {
                                            <a href="/Post/Details/@activity.PostSlug" class="activity-link">@activity.PostTitle</a>
                                        }
                                    </div>
                                    <div class="activity-time">@activity.ActivityDate.ToString("dd MMM yyyy, HH:mm")</div>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <div class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-text">HenÃ¼z aktivite bulunmuyor. Blogdaki yazÄ±larÄ± okuyarak aktivite oluÅŸturmaya baÅŸlayÄ±n!</div>
                                <div class="activity-time">Åžimdi</div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>

        <!-- Reading List Tab -->
        <div id="reading" class="tab-content">
            <div class="page-header">
                <h1 class="page-title">Son Okunan YazÄ±lar</h1>
                <p class="page-subtitle">YakÄ±n zamanda okuduÄŸun makaleler</p>
            </div>

            <div class="content-grid">
                <div class="reading-list">
                    @if (Model.RecentPosts.Any())
                    {
                        @foreach (var post in Model.RecentPosts)
                        {
                            <div class="book-item-small">
                                @if (!string.IsNullOrEmpty(post.FeaturedImage))
                                {
                                    <img src="@post.FeaturedImage" alt="@post.Title" class="book-cover-small" loading="lazy">
                                }
                                else
                                {
                                    <div class="book-cover-small no-image">
                                        <i class="fas fa-image"></i>
                                    </div>
                                }
                                <div class="book-info">
                                    <h4 class="book-title-small">
                                        <a href="/Post/Details/@post.Slug" style="color: inherit; text-decoration: none;">
                                            @post.Title
                                        </a>
                                    </h4>
                                    <div class="book-author-small">@post.AuthorName</div>
                                    <div class="reading-progress">
                                        <div class="progress-bar" data-width="@(post.TotalReadingTime > 0 ? Math.Min(100, (post.TotalReadingTime * 100) / 10) : 0)"></div>
                                    </div>
                                    <div class="post-stats">
                                        <span><i class="fas fa-eye"></i> @post.VisitCount</span>
                                        <span><i class="fas fa-clock"></i> @post.TotalReadingTime dk</span>
                                        @if (post.IsBookmarked)
                                        {
                                            <span><i class="fas fa-bookmark" style="color: #f39c12;"></i></span>
                                        }
                                    </div>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <div style="text-align: center; padding: 40px 20px;">
                            <i class="fas fa-book-open" style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
                            <h3>HenÃ¼z okunan yazÄ± yok</h3>
                            <p>Blogdaki yazÄ±larÄ± okuyarak okuma geÃ§miÅŸinizi oluÅŸturmaya baÅŸlayÄ±n!</p>
                        </div>
                    }
                </div>
                
                <div class="bookmarks-section">
                    <h3 class="section-title">Ä°statistikler</h3>
                    <div class="stats-summary">
                        <div class="stat-item">
                            <strong>Bu Hafta:</strong> @Model.Stats.PostsReadThisWeek yazÄ±
                        </div>
                        <div class="stat-item">
                            <strong>Bu Ay:</strong> @Model.Stats.PostsReadThisMonth yazÄ±
                        </div>
                        <div class="stat-item">
                            <strong>Ortalama Okuma SÃ¼resi:</strong> @Model.Stats.AverageReadingTime dk
                        </div>
                        <div class="stat-item">
                            <strong>Favori Kategori:</strong> @Model.Stats.FavoriteCategory
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bookmarks Tab -->
        <div id="bookmarks" class="tab-content">
            <div class="page-header">
                <h1 class="page-title">Yer Ä°mleri</h1>
                <p class="page-subtitle">KaydettiÄŸin makaleler ve baÄŸlantÄ±lar</p>
            </div>

            <div class="bookmarks-section">
                <div style="text-align: center; padding: 40px 20px;">
                    <h3>ðŸ“š Favorilerinizi GÃ¶rÃ¼ntÃ¼leyin</h3>
                    <p style="margin-bottom: 20px;">KaydettiÄŸiniz tÃ¼m blog yazÄ±larÄ±nÄ± ve favorilerinizi gÃ¶rÃ¼ntÃ¼lemek iÃ§in aÅŸaÄŸÄ±daki baÄŸlantÄ±ya tÄ±klayÄ±n.</p>
                    <a href="@Url.Action("Bookmarks", "UserPanel")" style="background: #333; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block;">
                        ðŸ”– TÃ¼m Favorilerimi GÃ¶r
                    </a>
                </div>
                
                <a href="#" class="bookmark-item">
                    <div class="bookmark-title">Portre FotoÄŸrafÃ§Ä±lÄ±ÄŸÄ±nda IÅŸÄ±k KullanÄ±mÄ±</div>
                    <div class="bookmark-url">qstudio.com/blog/portrait-lighting</div>
                </a>
            </div>
        </div>

        <!-- Profile Tab -->
        <div id="profile" class="tab-content">
            <div class="page-header">
                <h1 class="page-title">Profil AyarlarÄ±</h1>
                <p class="page-subtitle">Hesap bilgilerini ve sosyal medya baÄŸlantÄ±larÄ±nÄ±zÄ± yÃ¶netin</p>
            </div>

            <form class="profile-form" id="profileUpdateForm">
                <!-- Profile Picture Section -->
                <div class="form-section">
                    <h3 class="section-title">Profil Resmi</h3>
                    <div class="profile-picture-upload">
                        <div class="current-picture">
                            <img id="profilePreview" src="/images/placeholder.jpg" alt="Profile Picture" class="profile-img">
                        </div>
                        <div class="upload-controls">
                            <input type="file" id="profileImageInput" accept="image/*" style="display: none;">
                            <button type="button" class="btn-upload" onclick="document.getElementById('profileImageInput').click()">
                                <i class="fas fa-camera"></i> Resim YÃ¼kle
                            </button>
                            <p class="upload-hint">JPG, PNG veya WebP formatÄ±nda, maksimum 5MB</p>
                        </div>
                    </div>
                </div>

                <!-- Basic Information -->
                <div class="form-section">
                    <h3 class="section-title">Temel Bilgiler</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Ad</label>
                            <input type="text" class="form-input" name="firstName" id="firstName" placeholder="AdÄ±nÄ±z">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Soyad</label>
                            <input type="text" class="form-input" name="lastName" id="lastName" placeholder="SoyadÄ±nÄ±z">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Konum</label>
                            <input type="text" class="form-input" name="location" id="location" placeholder="Åžehir, Ãœlke">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">DoÄŸum Tarihi</label>
                            <input type="date" class="form-input" name="birthDate" id="birthDate">
                        </div>
                        
                        <div class="form-group full-width">
                            <label class="form-label">E-posta</label>
                            <input type="email" class="form-input" name="email" id="email" disabled placeholder="E-posta adresiniz">
                            <small class="form-help">E-posta adresi deÄŸiÅŸtirilemez. DeÄŸiÅŸtirmek iÃ§in destek ekibiyle iletiÅŸime geÃ§in.</small>
                        </div>
                        
                        <div class="form-group full-width">
                            <label class="form-label">Website</label>
                            <input type="url" class="form-input" name="website" id="website" placeholder="https://example.com">
                        </div>
                        
                        <div class="form-group full-width">
                            <label class="form-label">Biyografi</label>
                            <textarea class="form-textarea" name="bio" id="bio" rows="4" placeholder="Kendiniz hakkÄ±nda kÄ±sa bir aÃ§Ä±klama yazÄ±n... (maksimum 500 karakter)"></textarea>
                            <div class="char-counter">
                                <span id="bioCharCount">0</span>/500
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Social Media Links -->
                <div class="form-section">
                    <h3 class="section-title">Sosyal Medya BaÄŸlantÄ±larÄ±</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fab fa-facebook-f" style="color: #1877f2;"></i> Facebook
                            </label>
                            <input type="url" class="form-input" name="facebookUrl" id="facebookUrl" placeholder="https://facebook.com/kullaniciadi">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fab fa-twitter" style="color: #1da1f2;"></i> Twitter
                            </label>
                            <input type="url" class="form-input" name="twitterUrl" id="twitterUrl" placeholder="https://twitter.com/kullaniciadi">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fab fa-instagram" style="color: #e4405f;"></i> Instagram
                            </label>
                            <input type="url" class="form-input" name="instagramUrl" id="instagramUrl" placeholder="https://instagram.com/kullaniciadi">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fab fa-linkedin-in" style="color: #0077b5;"></i> LinkedIn
                            </label>
                            <input type="url" class="form-input" name="linkedInUrl" id="linkedInUrl" placeholder="https://linkedin.com/in/kullaniciadi">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fab fa-tiktok" style="color: #000;"></i> TikTok
                            </label>
                            <input type="url" class="form-input" name="tikTokUrl" id="tikTokUrl" placeholder="https://tiktok.com/@@kullaniciadi">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fab fa-youtube" style="color: #ff0000;"></i> YouTube
                            </label>
                            <input type="url" class="form-input" name="youTubeUrl" id="youTubeUrl" placeholder="https://youtube.com/c/kanaladi">
                        </div>
                    </div>
                </div>

                <!-- Password Change Section -->
                <div class="form-section">
                    <h3 class="section-title">Åžifre DeÄŸiÅŸtir</h3>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label class="form-label">Mevcut Åžifre</label>
                            <input type="password" class="form-input" name="currentPassword" id="currentPassword" placeholder="Mevcut ÅŸifrenizi girin">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Yeni Åžifre</label>
                            <input type="password" class="form-input" name="newPassword" id="newPassword" placeholder="Yeni ÅŸifrenizi girin">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Yeni Åžifre Onay</label>
                            <input type="password" class="form-input" name="confirmPassword" id="confirmPassword" placeholder="Yeni ÅŸifrenizi tekrar girin">
                        </div>
                    </div>
                    <div class="password-requirements">
                        <small>Åžifre en az 6 karakter uzunluÄŸunda olmalÄ±dÄ±r.</small>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelBtn">Ä°ptal</button>
                    <button type="submit" class="save-btn" id="saveBtn">
                        <i class="fas fa-save"></i> DeÄŸiÅŸiklikleri Kaydet
                    </button>
                </div>
            </form>
        </div>
    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="~/js/profile-api.js"></script>
<script>
    // Reading Stats Chart (gÃ¼nlÃ¼k okuma istatistikleri iÃ§in)
    document.addEventListener('DOMContentLoaded', function() {
        const readingData = @Html.Raw(Json.Serialize(Model.ReadingStats));
        
        // EÄŸer reading tab'da bir chart container varsa chart'Ä± Ã§iz
        const chartContainer = document.querySelector('#reading .chart-container');
        if (chartContainer) {
            const canvas = document.createElement('canvas');
            canvas.id = 'readingChart';
            chartContainer.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Object.keys(readingData),
                    datasets: [{
                        label: 'Okunan YazÄ± SayÄ±sÄ±',
                        data: Object.values(readingData),
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
    });
    
    // Animasyon efektleri iÃ§in (stat-number counter)
    document.addEventListener('DOMContentLoaded', function() {
        const statNumbers = document.querySelectorAll('.stat-number');
        
        statNumbers.forEach(function(statNumber) {
            const target = parseInt(statNumber.getAttribute('data-target'));
            const increment = target / 100;
            let current = 0;
            
            const updateNumber = function() {
                if (current < target) {
                    current += increment;
                    statNumber.textContent = Math.floor(current);
                    setTimeout(updateNumber, 20);
                } else {
                    statNumber.textContent = target;
                }
            };
            
            updateNumber();
        });
    });
</script>
